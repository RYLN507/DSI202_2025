{# shop_detail.html #}
{% extends 'base.html' %}

{% block title %}
  {{ menu.title }} | {{ menu.restaurant.category.display_name }}
{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
  {# ‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏°‡∏ß‡∏î‡πÄ‡∏°‡∏ô‡∏π #}
  <p class="mb-4">
    <a href="{% url 'shop_list' menu.restaurant.category.name %}"
       class="text-gray-600 hover:underline">
      ‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏°‡∏ß‡∏î: {{ menu.restaurant.category.display_name }}
    </a>
  </p>

  {# ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏ô‡∏π #}
  <h1 class="text-3xl font-bold text-green-700 mb-6">
    {{ menu.title }}
  </h1>

  <div class="bg-white rounded-lg shadow overflow-hidden">
    {# ‡∏£‡∏π‡∏õ‡πÄ‡∏°‡∏ô‡∏π (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ) #}
    {% if menu.image %}
      <img src="{{ menu.image.url }}"
           alt="{{ menu.title }}"
           class="w-full h-64 object-cover">
    {% else %}
      <div class="w-full h-64 bg-gray-200 flex items-center justify-center">
        <span class="text-gray-500">No Image</span>
      </div>
    {% endif %}

    <div class="p-6 space-y-4">
      {# ‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß #}
      <p class="text-gray-600">
        ‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß: <strong>{{ menu.sold_count }}</strong> ‡∏ä‡∏¥‡πâ‡∏ô
      </p>

      {# ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‚Äì‡∏õ‡∏¥‡∏î‡∏Ç‡∏≤‡∏¢ #}
      <p class="text-gray-600">
        ‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏±‡∏î‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢:
        {{ menu.start_time|time:"H:i" }} ‚Äì {{ menu.end_time|time:"H:i" }}
      </p>

      {# ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏Å‡∏ï‡∏¥ vs ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏•‡∏±‡∏á‡∏•‡∏î #}
      <div class="flex items-baseline space-x-4">
        <span class="text-gray-400 line-through">
          ‡∏ø{{ menu.price }}
        </span>
        <span class="text-2xl font-bold text-green-700">
          ‡∏ø{{ menu.discount_price }}
        </span>
      </div>

      {# ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏™‡∏±‡πâ‡∏ô ‡πÜ #}
      {% if menu.description %}
        <div>
          <h2 class="text-xl font-semibold text-green-700">‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö</h2>
          <p class="text-gray-700">{{ menu.description }}</p>
        </div>
      {% endif %}

      {# ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î (‡∏´‡∏•‡∏≤‡∏¢‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î) #}
      {% if menu.details %}
        <div>
          <h2 class="text-xl font-semibold text-green-700">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏°‡∏ô‡∏π</h2>
          <ul class="list-disc list-inside text-gray-700 space-y-1">
            {% for line in menu.details.splitlines %}
              {% if line %}
                <li>{{ line }}</li>
              {% endif %}
            {% endfor %}
          </ul>
        </div>
      {% endif %}

      {# ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤ #}
      <form action="{% url 'add_to_cart' menu.id %}" method="post" class="mt-6">
        {% csrf_token %}
        <button type="submit"
                class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold
                       py-2 rounded-lg transition">
          ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤ üõí
        </button>
      </form>
    </div>
  </div>
</div>
{% endblock %}

