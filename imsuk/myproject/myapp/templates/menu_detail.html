{% extends 'base.html' %}
{% load static %}
{% load currency_filters %}

{% block title %}{{ menu.title }} | ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏°‡∏ô‡∏π | IMSUK{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-10 max-w-3xl">
  <div class="bg-white shadow-md rounded-lg overflow-hidden">
    
    <!-- ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û -->
    {% if menu.image %}
      <img src="{{ menu.image.url }}" alt="{{ menu.title }}" class="w-full h-64 object-cover">
    {% else %}
      <div class="w-full h-64 bg-gray-200 flex items-center justify-center text-gray-500">
        ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
      </div>
    {% endif %}

    <!-- ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ -->
    <div class="p-6 space-y-4">
      <h1 class="text-3xl font-bold text-green-700">{{ menu.title }}</h1>

      <!-- ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ -->
      {% if menu.description %}
        <p class="text-gray-700">{{ menu.description }}</p>
      {% else %}
        <p class="text-gray-400 italic">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏ô‡∏µ‡πâ</p>
      {% endif %}

      <!-- ‡∏£‡∏≤‡∏Ñ‡∏≤ -->
      <div class="mt-4">
        {% if menu.discount_price %}
          <span class="text-xl text-gray-400 line-through mr-2">{{ menu.price|currency:"‡∏ø" }}</span>
          <span class="text-2xl text-green-600 font-bold">{{ menu.discount_price|currency:"‡∏ø" }}</span>
        {% else %}
          <span class="text-2xl text-green-700 font-bold">{{ menu.price|currency:"‡∏ø" }}</span>
        {% endif %}
      </div>

      <!-- ‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ -->
      <div class="text-sm text-gray-500">
        ‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£: {{ menu.start_time|default:"00:00" }} - {{ menu.end_time|default:"23:59" }}
      </div>

      <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤ -->
      {% if user.is_authenticated %}
        <form method="post" action="{% url 'add_to_cart' menu.id %}">
          {% csrf_token %}
          <button type="submit"
                  class="mt-6 bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-6 rounded-full transition">
            üõí ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
          </button>
        </form>
      {% else %}
        <p class="mt-6 text-red-500 font-medium">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</p>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
