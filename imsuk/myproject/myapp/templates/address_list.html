{% extends "base.html" %}
{% load static %}

{% block title %}ที่อยู่ของฉัน | อิ่มสุข{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8 max-w-2xl">

  <h1 class="text-3xl font-bold text-green-700 mb-8 text-center">ที่อยู่ของฉัน</h1>

  {% if addresses %}
    <div class="space-y-6">

      {% for address in addresses %}
        <div class="bg-white rounded-lg shadow p-6 relative">

          <div class="flex items-start justify-between">
            <div>
              <p class="text-gray-800">{{ address.text }}</p>
              {% if address.is_default %}
                <span class="text-green-600 text-sm font-semibold">(ที่อยู่เริ่มต้น)</span>
              {% endif %}
            </div>

            <div class="flex space-x-2">
              {% if not address.is_default %}
                <form action="{% url 'address_set_default' address.id %}" method="post">
                  {% csrf_token %}
                  <button type="submit" class="text-green-600 hover:underline text-sm">
                    ตั้งเป็นค่าหลัก
                  </button>
                </form>
              {% endif %}

              <form action="{% url 'address_delete' address.id %}" method="post">
                {% csrf_token %}
                <button type="submit" class="text-red-500 hover:underline text-sm">
                  ลบ
                </button>
              </form>
            </div>
          </div>

        </div>
      {% endfor %}

    </div>

  {% else %}
    <p class="text-center text-gray-500 mb-6">คุณยังไม่มีที่อยู่ในระบบ</p>
  {% endif %}

  <div class="text-center mt-8">
    <a href="{% url 'address_add' %}"
       class="inline-block bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-6 rounded-full transition">
      ➕ เพิ่มที่อยู่ใหม่
    </a>
  </div>

</div>
{% endblock %}
